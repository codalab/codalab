language: python
cache:
  - pip
  - apt
python:
  - "2.7"
branches:
  only:
    - master
install:
  - "pip install -r codalab/requirements/dev_azure_nix.txt"
#  - "pip install -q flake8 pylint django-nose"
before_script:
#  - "flake8 --config=.flake8 ."
#  - "pylint --rcfile=pylint.rc tests"
#  - "pylint --rcfile=pylint.rc setup.py"
script:
  - "cd codalab"
  - "flake8 . --max-line-length=120 --exclude=*/migrations/* --ignore=E712,E127,F403,E128,E126,E711,E501"
  - "python manage.py test --noinput"
notifications:
  slack: tivix:R2rmqmHoOvRo0pgfL7g7Sly6
